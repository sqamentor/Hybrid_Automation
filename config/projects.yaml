# Project Registry Configuration
# Defines all projects in the automation framework with environment-specific URLs

projects:
  
  # ========================================================================
  # BOOKSLOT PROJECT
  # ========================================================================
  bookslot:
    name: "BookSlot Appointment System"
    description: "Patient appointment booking and slot management system"
    
    # URL Pattern Matching (regex)
    url_patterns:
      - "bookslot.*"
      - ".*booking.*"
      - ".*appointment.*book.*"
    
    # Environment-specific URLs (staging and production only)
    environments:
      staging:
        ui_url: "https://bookslot-staging.centerforvein.com"
        api_url: "https://staging-api.centerforvein.com"
      production:
        ui_url: "https://bookslots.centerforvein.com"
        api_url: "https://api-prod.centerforvein.com"
    
    # Project paths
    paths:
      pages: "pages/bookslot"
      recorded_tests: "recorded_tests/bookslot"
      test_data: "test_data/bookslot"
    
    # Project-specific settings
    settings:
      default_timeout: 30000
      requires_verification: true
      has_multi_step_flow: true
    
    # URL Testing Configuration
    # Added: 2026-02-25
    # Purpose: URL workflow validation and query string testing
    url_testing:
      enabled: true
      url_format: "query_string"  # query_string | path_param | path_based | hybrid
      
      # Environment-specific URL testing config
      environments:
        staging:
          base_url: "https://bookslot-staging.centerforvein.com"
          workflows_file: "bookslot_workflows.json"
          test_data_mode: "manual"  # manual | auto
        production:
          base_url: "https://bookslots.centerforvein.com"
          workflows_file: "bookslot_workflows_prod.json"
          test_data_mode: "manual"
      
      # Validation settings
      validation:
        timeout_ms: 10000
        retry_count: 3
        expected_status: 200
        check_elements: true
        check_performance: true
        performance_threshold_ms: 5000
      
      # Reporting settings
      reporting:
        allure_enabled: true
        screenshot_on_failure: true
        video_on_failure: false
        save_validation_results: true
      
      # Page-specific configuration
      pages:
        P1:
          name: "Basic Info"
          path: "/basic-info"
          expected_elements:
            - "input[name='first_name']"
            - "input[name='last_name']"
            - "input[name='email']"
            - "input[name='phone_number']"
            - "button[type='submit']"
        P2:
          name: "Insurance"
          path: "/insurance"
          expected_elements:
            - "input[name='member_id']"
            - "input[name='group_number']"
            - "select[name='payer']"
        P3:
          name: "Schedule"
          path: "/schedule"
          expected_elements:
            - ".date-picker"
            - ".time-selector"
            - "button.confirm-schedule"
        P4:
          name: "Reason"
          path: "/reason"
          expected_elements:
            - "select[name='visit_reason']"
            - "button[type='submit']"
        P5:
          name: "Confirmation"
          path: "/confirmation"
          expected_elements:
            - ".confirmation-message"
            - ".appointment-details"
            - "button.confirm"
        P6:
          name: "Review"
          path: "/review"
          expected_elements:
            - ".review-section"
            - ".patient-info"
            - ".appointment-info"
            - "button.submit-final"
        P7:
          name: "Thank You"
          path: "/thank-you"
          expected_elements:
            - ".success-message"
            - ".appointment-details"
            - ".confirmation-number"
    
    # Team/ownership
    team: "Booking Team"
    contact: "booking-team@example.com"
  
  # ========================================================================
  # CALLCENTER PROJECT
  # ========================================================================
  callcenter:
    name: "Call Center Management System"
    description: "Call center operations and appointment management"
    
    # URL Pattern Matching (regex)
    url_patterns:
      - "callcenter.*"
      - ".*call-center.*"
      - ".*cc-portal.*"
    
    # Environment-specific URLs (staging and production only)
    environments:
      staging:
        ui_url: "https://staging-callcenter.centerforvein.com"
        api_url: "https://api-staging-callcenter.centerforvein.com"
      production:
        ui_url: "https://callcenter.centerforvein.com"
        api_url: "https://api-callcenter.centerforvein.com"
    
    # Project paths
    paths:
      pages: "pages/callcenter"
      recorded_tests: "recorded_tests/callcenter"
      test_data: "test_data/callcenter"
    
    # Project-specific settings
    settings:
      default_timeout: 30000
      requires_authentication: true
      has_admin_features: true
      sso_authentication: true  # Requires SSO login before accessing
      sso_portal: "centerforvein"  # Uses Center for Vein portal
    
    # Team/ownership
    team: "Call Center Team"
    contact: "callcenter-team@example.com"
  
  # ========================================================================
  # PATIENTINTAKE PROJECT
  # ========================================================================
  patientintake:
    name: "Patient Intake System"
    description: "Patient intake and appointment management system"
    
    # URL Pattern Matching (regex)
    url_patterns:
      - "patientintake.*"
      - ".*patient-intake.*"
      - ".*intake.*"
    
    # Environment-specific URLs (staging and production only)
    environments:
      staging:
        ui_url: "https://staging-patientintake.centerforvein.com"
        api_url: "https://api-staging-patientintake.centerforvein.com"
      production:
        ui_url: "https://patientintake.centerforvein.com"
        api_url: "https://api-patientintake.centerforvein.com"
    
    # Project paths
    paths:
      pages: "pages/patientintake"
      recorded_tests: "recorded_tests/patientintake"
      test_data: "test_data/patientintake"
    
    # Project-specific settings
    settings:
      default_timeout: 30000
      requires_patient_data: true
      has_appointment_listing: true
      sso_authentication: true  # Requires SSO login before accessing
      sso_portal: "centerforvein"  # Uses Center for Vein portal
    
    # Team/ownership
    team: "Patient Services Team"
    contact: "patient-services@example.com"

# ========================================================================
# GLOBAL SETTINGS
# ========================================================================
global_settings:
  
  # Default project for unknown URLs
  default_project: "bookslot"
  
  # Auto-create project structure
  auto_create_directories: true
  
  # Recording file naming
  recording_naming:
    pattern: "test_{project}_{feature}_{timestamp}"
    timestamp_format: "%Y%m%d_%H%M%S"
    use_feature_name: true
  
  # Page object generation
  page_object_naming:
    pattern: "{feature}_page"
    suffix: ".py"
  
  # Environment detection (staging and production only)
  environment_detection:
    auto_detect: true
    prefer_env_variable: true  # Use TEST_ENV if set
    # Keywords in URL that indicate staging environment
    staging_keywords: ["staging", "stage", "uat", "qa", "test"]
    # Production is default if no staging keywords match
    fallback_env: "production"
  
  # Project structure templates
  templates:
    init_file: |
      """
      {project_name} Test Module
      Auto-generated by Framework Recording System
      """
      __all__ = []
    
    readme_file: |
      # {project_name} Tests
      
      Automated tests for {project_description}
      
      ## Team
      {team}
      
      ## Contact
      {contact}

# ========================================================================
# NEW PROJECT TEMPLATE
# ========================================================================
new_project_template:
  name: "New Project"
  description: "Description of the new project"
  url_patterns:
    - "newproject.*"
  environments:
    staging:
      ui_url: "https://staging-newproject.example.com"
      api_url: "https://api-staging-newproject.example.com"
    production:
      ui_url: "https://newproject.example.com"
      api_url: "https://api-newproject.example.com"
  paths:
    pages: "pages/newproject"
    recorded_tests: "recorded_tests/newproject"
    test_data: "test_data/newproject"
  settings:
    default_timeout: 30000
  team: "Project Team"
  contact: "team@example.com"
